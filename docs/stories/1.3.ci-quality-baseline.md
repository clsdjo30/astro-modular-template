# Story 1.3: CI Quality Baseline

## Status
Draft

## Story
**As a** solo freelancer,  
**I want** baseline quality checks wired into the template,  
**so that** new projects fail fast when misconfigured.

## Acceptance Criteria
1. CI scripts include lint, typecheck, astro check, and build.
2. CI passes on a freshly generated project without manual edits.
3. Lint and formatting config are present and runnable locally.

## Non-Goals
- No advanced quality gates (coverage thresholds, performance budgets, e2e).
- No deployment automation.
- No module system validation beyond base template.

## Tasks / Subtasks
- [ ] Add CI workflow for generator repo (AC: 1, 2)
  - [ ] Create `.github/workflows/ci.yaml` with `pnpm install`, `pnpm lint`, `pnpm typecheck`, `pnpm astro check`, `pnpm build`.
  - [ ] Pin pnpm setup to 10.0.0 in CI.
- [ ] Ensure base template scripts exist and pass locally (AC: 1, 2, 3)
  - [ ] Verify `lint`, `typecheck`, `astro check`, and `build` scripts in base template.
  - [ ] Confirm clean run of all commands on a generated project (no manual edits).
- [ ] Add lint/format config to base template (AC: 3)
  - [ ] ESLint config aligned with ESLint 9.0.0.
  - [ ] Prettier config aligned with Prettier 3.3.0.
- [ ] Add minimal test command (AC: 2)
  - [ ] Ensure `pnpm test` runs cleanly (placeholder ok).

## Dev Notes
### Architecture References
- CI pipeline steps and pnpm version are defined in deployment architecture. [Source: architecture/deployment-architecture.md#CI/CD Pipeline (Generator Repo)]
- Toolchain versions: pnpm 10.0.0, ESLint 9.0.0, Prettier 3.3.0, Astro 5.0.0. [Source: architecture/tech-stack.md#Technology Stack Table]
- Testing strategy includes unit + integration; template tests optional; CI should validate build/lint/typecheck. [Source: architecture/testing-strategy.md#Test Organization]

### CI Scope Clarification
- CI runs in the generator/tooling repo and validates the template build commands.
- Validation of a freshly generated project is done within CI by invoking the template scripts on a generated output (not a separate repo pipeline).

### File Locations
- CI workflow: `.github/workflows/ci.yaml` in generator repo. [Source: architecture/unified-project-structure.md#Unified Project Structure]
- Base template configs in `templates/base/` (ESLint, Prettier, package.json scripts). [Source: architecture/unified-project-structure.md#Unified Project Structure]

## Testing
Relevant standards from architecture:
- Use pnpm and run lint/typecheck/astro check/build in CI. [Source: architecture/deployment-architecture.md#CI/CD Pipeline (Generator Repo)]
- Test pyramid is unit + integration; template tests are optional. [Source: architecture/testing-strategy.md#Testing Strategy]

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-18 | v0.1 | Drafted Story 1.3 | Bob (SM) |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results
