# Story 4.3: Product Catalog & Product Pages

## Status
Done

## Story
**As a** solo freelancer,  
**I want** product catalog data and product pages,  
**so that** restaurants can display offerings consistently.

## Acceptance Criteria
1. Catalog supports products with name, price, description, and image.
2. Product list and detail pages render from API data.
3. Data access is encapsulated in a service layer on the frontend.

## Tasks / Subtasks
- [ ] Add product API routes (AC: 1, 2)
  - [ ] Implement `GET /api/v1/products` and `GET /api/v1/products/{id}`.
  - [ ] Add admin-only CRUD endpoints (POST/PATCH/DELETE) even without full admin UI.
  - [ ] Add Zod validation for product payloads.
- [ ] Add frontend service layer (AC: 3)
  - [ ] Add `apiClient` and `productService` under `templates/presets/commerce/src/services/`.
  - [ ] Use `PUBLIC_API_BASE_URL` and credentials for fetch.
- [ ] Add product pages (AC: 2)
  - [ ] Product list: `/products` -> `templates/presets/commerce/src/pages/products/index.astro`
  - [ ] Product detail: `/products/[id]` -> `templates/presets/commerce/src/pages/products/[id].astro`
  - [ ] Render list/detail using the service layer and base layout.

## Dev Notes
### Architecture References
- API endpoints for products. [Source: architecture/api-specification-rest.md]
- Frontend service layer pattern. [Source: architecture/frontend-architecture.md#Frontend Services Layer]
- Product model and fields. [Source: architecture/data-models.md#Product]

### Dependencies
- Story 4.1 (API skeleton).
- Story 4.2 (auth middleware for admin product CRUD).

### Scope Boundaries (v1)
- Product images are URLs only; file upload handling is deferred.
- No categories/taxonomies beyond the basic fields.

### File Locations
- API routes: `packages/api/src/routes/products.routes.ts`
- API controllers/services: `packages/api/src/controllers/products.controller.ts`, `packages/api/src/services/products.service.ts`
- Frontend services: `templates/presets/commerce/src/services/`
- Pages: `templates/presets/commerce/src/pages/products/`

## Testing
Relevant standards from architecture:
- Backend integration tests in `packages/api`. [Source: architecture/testing-strategy.md#Test Organization]
Manual verification:
- Product list and detail pages render data from the API.

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-18 | v0.1 | Drafted Story 4.3 | Bob (SM) |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results
