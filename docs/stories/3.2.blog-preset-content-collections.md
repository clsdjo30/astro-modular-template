# Story 3.2: Blog Preset (Content Collections)

## Status
Done

## Story
**As a** solo freelancer,  
**I want** a blog preset with content collections,  
**so that** I can publish posts quickly.

## Acceptance Criteria
1. Blog preset includes a posts content collection schema using Astro Content Collections.
2. Blog output includes list, detail, tag/category, and RSS routes.
3. Static build succeeds with no backend dependencies.

## Tasks / Subtasks
- [x] Define blog preset composition (AC: 1, 2, 3)
  - [x] Create preset metadata in `templates/presets/blog/`.
  - [x] Use a YAML preset manifest named `preset.yaml`.
  - [x] Reference base template and add blog pages/content only in preset scope.
- [x] Add content collection schema (AC: 1)
  - [x] Add `templates/presets/blog/src/content/config.ts` defining the `posts` collection.
  - [x] Include required fields: `title`, `description`, `pubDate`, `tags` (array), `category`.
  - [x] Add sample post content under `templates/presets/blog/src/content/posts/`.
- [x] Add blog routes (AC: 2)
  - [x] List page: `/blog` -> `templates/presets/blog/src/pages/blog/index.astro`
  - [x] Detail page: `/blog/[slug]` -> `templates/presets/blog/src/pages/blog/[slug].astro`
  - [x] Tag page: `/blog/tags/[tag]` -> `templates/presets/blog/src/pages/blog/tags/[tag].astro`
  - [x] Category page: `/blog/categories/[category]` -> `templates/presets/blog/src/pages/blog/categories/[category].astro`
  - [x] RSS: `/rss.xml` -> `templates/presets/blog/src/pages/rss.xml.ts`
  - [x] Use the base layout (`templates/base/src/layouts/BaseLayout.astro`) in all blog pages.
- [x] Verify static-only output (AC: 3)
  - [x] Ensure no backend deps or frameworks are introduced.
  - [x] Run `pnpm build` for static output (base template).

## Dev Notes
### Architecture References
- Base page and component structure: `src/pages/` and layout components. [Source: architecture/frontend-architecture.md#Component Architecture]
- Repo structure: presets in `templates/presets/`, base in `templates/base/`. [Source: architecture/unified-project-structure.md#Unified Project Structure]
- Static-first output and no framework by default. [Source: architecture/tech-stack.md#Technology Stack Table]

### Dependencies
- Story 1.1 (base template structure and layout).
- Story 2.1 (YAML manifest conventions for presets).

### Scope Boundaries (v1)
- Blog preset adds content collections and blog routes only.
- No SEO additions in this story (handled in Story 3.3).
- No form or analytics additions.

### File Locations
- Preset metadata: `templates/presets/blog/`
- Preset pages: `templates/presets/blog/src/pages/`
- Preset content: `templates/presets/blog/src/content/`

## Testing
Relevant standards from architecture:
- Template tests optional; ensure `pnpm build` succeeds. [Source: architecture/testing-strategy.md#Testing Strategy]
- No framework dependencies required. [Source: architecture/tech-stack.md#Technology Stack Table]
Manual verification:
- Confirm content collection schema compiles.
- Confirm blog routes render with the base layout.

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-18 | v0.1 | Drafted Story 3.2 | Sarah (PO) |
| 2026-01-18 | v0.1 | Added blog preset content, routes, and manifest. | James |

## Dev Agent Record
### Agent Model Used
GPT-5

### Debug Log References
- `pnpm build` (local run in `templates/base` succeeded)

### Completion Notes List
- Added blog preset manifest, content collection, sample post, and routes.
- RSS endpoint generated without additional dependencies.

### File List
- templates/presets/blog/preset.yaml
- templates/presets/blog/src/content/config.ts
- templates/presets/blog/src/content/posts/hello-world.md
- templates/presets/blog/src/pages/blog/index.astro
- templates/presets/blog/src/pages/blog/[slug].astro
- templates/presets/blog/src/pages/blog/tags/[tag].astro
- templates/presets/blog/src/pages/blog/categories/[category].astro
- templates/presets/blog/src/pages/rss.xml.ts

## QA Results
