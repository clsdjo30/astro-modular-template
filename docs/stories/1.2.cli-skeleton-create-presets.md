# Story 1.2: CLI Skeleton (create)

## Status
Done

## Story
**As a** solo freelancer,  
**I want** a CLI that can create a new project from the base template,  
**so that** I can bootstrap a project in minutes.

## Acceptance Criteria
1. CLI supports a `create` command that generates a project from `templates/base/`.
2. CLI uses plain prompt-based input when the target path or project name is not provided.
3. Generated project includes only baseline files from the base template.
4. CLI outputs a clear summary of the generated project path and next steps.

## Non-Goals
- No preset flags (`--vitrine`, `--blog`, `--restaurant`) in Story 1.2.
- No module system or add/remove commands.
- No rich CLI UX beyond minimal prompts.

## Tasks / Subtasks
- [x] Implement CLI entry and `create` command (AC: 1, 2, 4)
  - [x] Add `packages/cli` command handler and argument parsing.
  - [x] Prompt for project name/path when not provided (plain prompts only).
  - [x] Print a summary of the generated project path and next steps.
- [x] Wire CLI to base template (AC: 1, 3)
  - [x] Copy `templates/base/` into a new project directory.
  - [x] Ensure output is a buildable Astro + TypeScript project.
  - [x] Do not include module system or preset-specific content in this story.
- [x] Add CLI tests (AC: 1, 2, 4)
  - [x] Unit tests for argument parsing and path handling.
  - [x] Integration test: `create` produces expected base template file tree.
- [x] Update CLI docs (AC: 4)
  - [x] Add usage to README or CLI help output.

## Dev Notes
### Architecture References
- Repo structure: CLI lives in `packages/cli`, templates in `templates/base`. [Source: architecture/unified-project-structure.md#Unified Project Structure]
- CLI uses pnpm tooling and Node 22.19.0. [Source: architecture/tech-stack.md#Technology Stack Table]
- CLI prompts must be plain (no TUI). [Source: architecture/development-workflow.md#Local Development Setup]
- Testing requirements for CLI integration tests include `create --preset vitrine` file tree validation; this story limits scope to base `create` and defers preset tests. [Source: architecture/testing-strategy.md#Must-Have CLI Integration Tests]
- Coding standards: generator idempotence markers are required when patch points exist (not used yet in this story). [Source: architecture/coding-standards.md#Critical Fullstack Rules]

### File Locations
- CLI source: `packages/cli/`  
- Base template: `templates/base/`  

## Testing
Relevant standards from architecture:
- CLI must have unit + integration tests. [Source: architecture/testing-strategy.md#Test Organization]
- Must-have CLI integration test: `create --preset vitrine` asserts generated file tree (deferred to later story; this story uses a base `create` test). [Source: architecture/testing-strategy.md#Must-Have CLI Integration Tests]
- Use Vitest 2.0.0. [Source: architecture/tech-stack.md#Technology Stack Table]

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-18 | v0.1 | Drafted Story 1.2 | Bob (SM) |
| 2026-01-18 | v0.2 | Scoped to base create only (no presets) | Bob (SM) |

## Dev Agent Record
### Agent Model Used
GPT-5

### Debug Log References
- pnpm install failed in packages/cli: ERR_PNPM_NO_OFFLINE_META (@types/node@22.13.4)
- pnpm install/test succeeded with: --package-import-method=copy

### Completion Notes List
- Implemented CLI create command, prompts, and template copy logic.
- Added unit and integration tests and CLI README.
- Unable to run tests due to pnpm offline metadata error in packages/cli.
- User re-ran `pnpm install --force --package-import-method=copy` and `pnpm test` successfully.

### File List
- packages/cli/package.json
- packages/cli/tsconfig.json
- packages/cli/vitest.config.ts
- packages/cli/README.md
- packages/cli/src/args.ts
- packages/cli/src/prompt.ts
- packages/cli/src/template.ts
- packages/cli/src/create.ts
- packages/cli/src/index.ts
- packages/cli/tests/args.test.ts
- packages/cli/tests/create.test.ts

## QA Results
